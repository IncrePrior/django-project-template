build:
  image: thorgate/python3.4
  volumes:
    - /wheelhouse:/wheelhouse
  commands:
    - pip wheel -r requirements.txt
    - virtualenv --python=python3.4 venv
    - . ./venv/bin/activate
    - pip install -r requirements.txt
    - git config --global user.email "foo@bar.baz"
    - git config --global user.name "Foo Bar"
    - tox
clone:
  image: plugins/drone-hg

compose:
  database:
    image: postgres:9.5
    environment:
      - POSTGRES_USER=test_project
      - POSTGRES_PASSWORD=test_project

  redis:
    image: redis:3.2-alpine
